<div class="container-fluid">
    <div class="tabs primary-bg">
        <div class="container customContainer position-relative">
          <div
            class="prev position-absolute top-50 start-0 translate-middle-y ps-3"
            [ngClass]="
              categories.length > this.commonService.vtabsItem ? '' : 'd-none'
            "
            (click)="prev()"
          >
            <img src="assets/img/left-arrow.svg" loading="lazy"/>
          </div>
          <ul class="row innerContent m-0">
            <li
              *ngFor="let item of categories; index as i"
              class="col col-sm-6 col-md-4 col-lg border-end text-center"
              [ngClass]="
                i < this.commonService.vtabsItem + this.skipTab && i >= this.skipTab
                  ? 'active'
                  : 'd-none'
              "
            >
              <span
                class=" position-relative"
                [ngClass]="i + 1 === activeTab ? 'active' : ''"
                (click)="setActiveTab(i + 1,item)"
                >{{ item?.name }}</span
              >
            </li>
          </ul>
          <div
            class="next position-absolute top-50 end-0 translate-middle-y pe-3"
            [ngClass]="
            categories.length > this.commonService.vtabsItem ? '' : 'd-none'
            "
            (click)="next()"
          >
            <img src="assets/img/right-arrow.svg" loading="lazy"/>
          </div>
        </div>
      </div>

    <div class="row p-4">
        <div class="col-md-8">
            <div class="row pb-3">
                <div class="col-md-12">
                    <img
                    appYoutubeImage
                    srcset="{{brandInfo?.media | defaultImage:953:535}}"
                    class="img-fluid"
                    sizes="{{
                      '(max-width: 576px) 555px,
                      (max-width: 992px) 400px,
                      (max-width: 1200px) 238px,
                      300px'
                    }}"
                    width="953"
                    height="535"
                    data-src="{{ brandInfo.media | defaultImage: 100:95 }}"
                    alt="brand_img"
                    loading="lazy"
                  />
                </div>
            </div>
            <div class="question-container" *ngIf="isInfo">
                <div class="title-highlighter">
                    {{ brandInfo?.name }} INFO
                </div>
                <div class="question-section"  *ngFor="let item of items; let i = index">
                    <div class="row d-flex justify-content-center align-items-center header header-highlighter">
                        <div class="col-md-12 title">
                         {{ item?.title }}
                        </div>
                    </div>
                    <div class="row description">
                        <div class="col-md-12">
                            <p  *ngIf="item?.short_description"
                            [innerHTML]="item?.short_description"></p>
                        </div>
                    </div>
                </div>
            </div>

            <div *ngIf="isPdf">
                <div class="container customContainer py-5 pl-5 ml-5">
                    <div class="frannews-top-left d-flex"> LEARN MORE ABOUT</div>
                    <img
                    srcset="{{ logo?.url | defaultImage:303:150}}"
                    class="img-fluid"
                    sizes="{{
                    '(max-width: 576px) 555px,
                    (max-width: 992px) 400px,
                    (max-width: 1200px) 238px,
                    300px'
                    }}"
                    width="300"
                    height="150"
                    data-src="{{ logo?.url | defaultImage: 100:95 }}"
                    alt="brand_logo"
                    loading="lazy"
                 />
                 <div class="row download-btn"> 
                   <a *ngIf="pdf?.email_popup"  data-bs-toggle="modal" data-bs-target="#pdfModal" href="#">
                    <button type="submit" class="btn text-center submit-btn text-white rounded-0 btn-sm "> Download PDF </button>
                  </a>
                  <a *ngIf="!pdf?.email_popup" href="{{ changeDownPDFUrl(pdf?.media?.url) }}">
                    <button type="submit" class="btn text-center submit-btn text-white rounded-0 btn-sm "> Download PDF </button>
                  </a>
                  </div>
                </div>  
            </div>

            <div [hidden]="!isStory">
                <div class="tabs-container container customContainer py-md-2">
                    <div class="tabItemList innerContent mt-4 py-3">
                      <div class="row mt-2">
                        <div *ngFor="let list of items; index as i" class="mb-3 col-12 col-sm-6 col-md-4">
                          <div class="items card border-0 rounded-0">
                            <a
                            routerLink="{{ commonService.readMore(list) }}"
                            fragment="latest-stories">
                            <img
                            src="{{ list.media | defaultImage: 257:138 }}"
                            class="card-img-top"
                            alt="latest-stories"
                            width="257"
                            height="138"
                            loading="lazy"
                          />
                            <div class="card-body text-black text-capitalize">
                              <h4 class="card-text mb-1 text-size">
                                <strong>{{ list.title }}</strong>
                              </h4>
                              <small>{{ list.author?.name }}</small>
                              <h4 class="card-text mb-1 text-size">
                                <strong>{{ list.short_description }}</strong>
                              </h4>
                            </div>
                          </a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
              </div>

            <div *ngIf="isBought">
                <div class="wings">
                  <div class="frannews-top-left d-flex">
                    <ul>
                      <li class="header-title">
                        <h2 class="text-uppercase">
                          {{ items?.name }}
                        </h2>
                      </li>
                      <li>
                        <h2 class="text-uppercase">
                          <span>WHY I BOUGHT</span>
                        </h2>
                      </li>
                    </ul>
                  </div>
                  <p
                    *ngIf="items?.content"
                    [innerHTML]="items?.content"
                  ></p>
                </div>
            </div>

            <div *ngIf="isExecutive">
                <div class="wings">
                  <div class="frannews-top-left d-flex executive-qa">
                    <ul>
                      <li class="header-title">
                        <h2 class="text-uppercase">
                          {{ items?.name }}
                        </h2>
                      </li>
                      <li>
                        <h2 class="text-uppercase">
                          <span>EXECUTIVE Q&A</span>
                        </h2>
                      </li>
                    </ul>
                  </div>
                  <p
                    class="executive-qa-content"
                    *ngIf="items?.content"
                    [innerHTML]="items?.content"
                  ></p>
                </div>
            </div>

            <div *ngIf="isMarket">
                <div class="wings">
                  <div class="frannews-top-left d-flex">
                    <ul>
                      <li>
                        <h2 class="text-uppercase">Available Markets</h2>
                      </li>
                    </ul>
                  </div>
                  <div>
                    <div
                      *ngIf="
                        items['available-markets'] != null &&
                        items['available-markets'].length
                      "
                      class="mapcontainer"
                    >
                      <div
                        class="lg-map-wrapper"
                        style="width: 100%; height: auto"
                      >
                        <svg id="map" width="800" height="500"></svg>
                      </div>
                    </div>
                    <div
                      *ngIf="
                        items['available-markets'] != null &&
                        items['available-markets'].length
                      "
                      class="map-legend"
                    >
                      MAP LEGEND:
                      <div class="row">
                        <div
                          *ngFor="let market of items['available-markets']"
                          class="col-sm-5 map-legend-item"
                        >
                          <div class="row market-names">
                            <div class="col-xs-1">
                              <div
                                class="market-status-color"
                                [style.backgroundColor]="market.color"
                              ></div>
                            </div>
                            <div
                              class="col-xs-10 align-self-center lh-base"
                            >
                              <span class="text-uppercase market-name">{{
                                market.name
                              }}</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div style="padding-top: 0px">
                      <div
                        *ngIf="
                          items['international-markets'] != null &&
                          items['international-markets'].length
                        "
                        class="map-legend"
                      >
                        <h3>INTERNATIONAL MARKETS:</h3>
                        <div class="row">
                          <div
                            *ngFor="
                              let market of items['international-markets']
                            "
                            class="col-sm-3 map-legend-item"
                          >
                            <div class="row market-names">
                              <div class="col-xs-10">
                                <span class="text-uppercase market-name">{{
                                  market.name
                                }}</span>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              
        </div>

        <div class="col-md-4">
            <div class="financial-requirement-section">
                <div class="row d-flex justify-content-center align-items-center header">
                    <div class="col-md-12 title">
                        Financial Requirments
                    </div>
                </div>
                <div class="row p-3 financial-description">
                    <div class="col-md-12">
                        <p class="text">
                           {{ brandInfo?.more_info }}
                        </p>
                        <p class="text">
                            Initial Franchise Fee: <span class="highlight-text"> {{ brandInfo?.franchise_fee }} </span>
                        </p>
                        <p class="text">
                            Initial Investment Range: <span class="highlight-text"> {{ brandInfo?.startup_costs }} </span>
                        </p>
                        <p class="text">
                            Minimum Qualifications:
                        </p>
                        <p class="highlight-text min-qualification" *ngFor="let info of brandInfo?.optional_info">
                           {{info.title}} {{ info.value }} <br />
                        </p>
                        <p class="text">
                            Territory: Protected territory with geographic rights to the Sylvan system in a well-defined area
                        </p>
                        <p class="text">
                            With an average gross revenue of $518,159 among the top 25% of territories, Sylvan Learning offers a business opportunity with both financial and
                            emotional rewards.
                        </p>
                        <p class="text" *ngFor="let info of brandInfo?.optional_info">
                          {{info.title}} : <span class="highlight-text">{{ info.value }}</span>
                        </p>
                    </div>
                </div>
            </div>

          
            <div class="inquiry-form-section">
                <div class="row d-flex justify-content-center align-items-center header">
                    <div class="col-md-12 title">
                        INQUIRE NOW
                    </div>
                </div>
                <form
                *ngIf="inquireForm"
                [formGroup]="inquireForm"
                (ngSubmit)="submitInquireForm(inquireForm.value)">
                <div class="row p-3"  *ngFor="let fields of inquireFields">
                        <input 
                        *ngIf="fields.type === 'text'" 
                        [formControlName]="fields.key" 
                        placeholder="{{fields.title}}*" 
                        [id]="fields.key" class="form-control" 
                        [type]="fields.type" 
                        [pattern]="fields.pattern" 
                        [maxLength]="fields.maxLength || 1000">
                       
                        <textarea *ngIf="fields.type === 'textarea'"
                        placeholder="{{fields.title}}*"
                        [formControlName]="fields.key"
                        [id]="fields.key"
                        class="form-control"
                        rows="3"
                        [ngClass]="{
                          'is-invalid':
                            (formControlsValues[fields.key].touched ||
                              submittedInquireForm) &&
                            formControlsValues[fields.key].errors?.required
                        }"></textarea>
                        
                        <select *ngIf="fields.type === 'dropdown'"
                        [formControlName]="fields.key"
                        [id]="fields.key"
                        class="form-control"
                        [ngClass]="{
                          'is-invalid':
                            (formControlsValues[fields.key].touched ||
                              submittedInquireForm) &&
                            formControlsValues[fields.key].errors?.required }" >
                        <option *ngFor="let value of fields.enum"
                          value="{{ value }}">
                          <span>{{ value }}</span>
                        </option>
                      </select>
                      <div
                      class="invalid-feedback d-block"
                      *ngIf="
                        (formControlsValues[fields.key].touched ||
                          submittedInquireForm) &&
                        (formControlsValues[fields.key].errors?.required ||
                          formControlsValues[fields.key].errors?.email ||
                          formControlsValues[fields.key].errors?.pattern)
                      "
                    >
                      {{ fields.errorMsg }}
                    </div>
                </div>
            </form>
            <div class="divider-recent-feature">
                <div class="row"> 
                    <button type="submit" class="btn text-center text-white rounded-0 btn-sm "> Next </button>
                </div>
            </div> 

            <!-- Recent Features -->
            <!-- <div class="recent-feature-article-section">
                <div class="row p-3">
                    <div class="col-md-12">
                        <div class="title-tag">
                            RECENT FEATURES
                        </div>
                        <div class="recent-item">
                            <p class="title">Title Lorem Ipsum: Conset Entumi Abudi</p>
                            <p class="description">Lorem ipsum dolor sit amet, consectetur adipis cing elit, sed do eiusmod tempor incididun.A scelerisque purus semper eget..</p>
                        </div>
                        <div class="recent-item">
                            <p class="title">Title Lorem Ipsum: Conset Entumi Abudi Lorem Ipsum...</p>
                            <p class="description">Lorem ipsum dolor sit amet, consectetur adipis cing elit, sed do eiusmod tempor incididun.A scelerisque purus semper eget..</p>
                        </div>
                        <div class="recent-item">
                            <p class="title">Title Lorem Ipsum: Conset Entumi Abudi</p>
                            <p class="description">Lorem ipsum dolor sit amet, consectetur adipis cing elit, sed do eiusmod tempor incididun.A scelerisque purus semper eget..</p>
                        </div>
                    </div>
                </div>
            </div> -->

            <!-- Featured Article Section -->
            <!-- <div class="divider-main"></div>
            <div class="feature-article-section">
                <div class="row p-3 d-flex align-items-center justify-content-center">
                    <div class="col-md-9">
                        <div class="feature-item">
                            <div class="image-tag">FEATURED ARTICLE</div>
                            <div class="image-area"></div>
                            <div class="image-description">
                                Title Lorem Ipsum Abudi Lorem Ipsum Yada Sed
                            </div>
                        </div>
                        <div class="feature-item">
                            <div class="image-tag">FEATURED ARTICLE</div>
                            <div class="image-area"></div>
                            <div class="image-description">
                                Title Lorem Ipsum Abudi Lorem Ipsum Yada Sed
                            </div>
                        </div>
                        <div class="feature-item">
                            <div class="image-tag">FEATURED ARTICLE</div>
                            <div class="image-area"></div>
                            <div class="image-description">
                                Title Lorem Ipsum Abudi Lorem Ipsum Yada Sed
                            </div>
                        </div>
                    </div>
                </div>
            </div> -->

            <!-- Trending Secion -->
            <!-- <div class="divider-main"></div>
            <div class="trending-section">
                <div class="row p-3">
                    <div class="col-md-12">
                        <div class="title-tag">
                            TRENDING
                        </div>
                        <div class="row p-2 d-flex justify-content-center align-items-center trending-item">
                            <div class="col-md-4 image-area p-3"></div>
                            <div class="col-md-8 image-decription">
                                Lorem ipsum morbi tristia con flubet o lemase asdew en asade con do
                            </div>
                        </div>
                        <div class="row p-2 d-flex justify-content-center align-items-center trending-item">
                            <div class="col-md-4 image-area p-3"></div>
                            <div class="col-md-8 image-decription">
                                Lorem ipsum morbi tristia con flubet o lemase asdew en asade
                            </div>
                        </div>
                        <div class="row p-2 d-flex justify-content-center align-items-center trending-item">
                            <div class="col-md-4 image-area p-3"></div>
                            <div class="col-md-8 image-decription">
                                Lorem ipsum morbi tristia con flubet o lemase asdew en asade
                            </div>
                        </div>
                        <div class="row p-2 d-flex justify-content-center align-items-center trending-item">
                            <div class="col-md-4 image-area p-3"></div>
                            <div class="col-md-8 image-decription">
                                Lorem ipsum morbi tristia con flubet o lemase asdew en asade con do
                            </div>
                        </div>
                    </div>
                </div> 
            </div> -->
        </div>
    </div>

    <div *ngIf="isBrowser" class="search_pop_up modal" id="pdfModal">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="sponsored-modal-content">
            <button
              type="button"
              class="close text-right"
              data-bs-dismiss="modal"
            >
              &times;
            </button>
            <h2 class="text-uppercase">Download PDF</h2>
            <div class="email-content">
              <form [formGroup]="pdfForm" (ngSubmit)="emailSubscribe(pdfForm)">
                <div class="form-group">
                  <label>Enter Email:</label>
                  <input
                    type="text"
                    [formControl]="pdfForm.controls['emailInput']"
                    class="form-control"
                  />
                  <app-error-message
                    *ngIf="isEmailSubmit"
                    class="full-width"
                    [control]="pdfForm.controls['emailInput']"
                  ></app-error-message>
                  <p *ngIf="emailSubValid" class="invalid">
                    {{ emailSubMessage }}
                  </p>
                  <button type="button" (click)="emailSubscribe(pdfForm)">
                    Download
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

</div>