<div
  class="c-video-section--wrapper sidebar-blur"
  *ngIf="isLoaded && videoData"
>
  <div class="container customContainer">
    <div class="row">
      <div class="col-12">
        <div class="d-flex align-items-center c-section-header--wrapper">
          <div class="c-section-header--group d-flex align-items-end">
            <h2 class="c-section--title text-uppercase m-0">Videos</h2>
            <span class="c-section-header--subInfo">
              Covering the franchise industry
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="c-divider--wrapper"></div>

  <div class="container customContainer">
    <div class="d-flex row c-video-section--boxWrapper">
      <div
        class="c-video-section--box col-lg-6 col-sm-6"
        *ngFor="let item of videoData | slice: 0:2; index as i"
      >
        <div class="position-relative main-image">
          <div class="badge tag position-absolute top-0 text-uppercase">
            FEATURED Video
          </div>
          <a
            *ngIf="item?.media"
            (click)="openVideoPlayer = true"
            attr.data-src="{{ item.media.url }}"
            data-bs-target="#videoModal"
            data-bs-toggle="modal"
            (click)="updateVideoUrl(item.media.url)"
            href="#"
            class="
              video-btn
              c-video-section--playBtn
              d-flex
              justify-content-center
              align-items-center
            "
          >
            <img
              data-src="{{ item.media | defaultImage: 550:304 }}"
              data-srcset="{{ item.media | defaultImage: 550:304 }} 550w, 
                      {{ item.media | defaultImage: 225:133 }} 225w,
                    {{ item.media | defaultImage: 300:174 }} 300w"
              data-sizes="{{
                '(max-width: 576px) 300px,
                    (max-width: 992px) 400px,
                    (max-width: 1200px) 550px,
                    550px'
              }}"
              class="img-fluid lazyload"
              alt="video"
              width="550"
              height="304"
              loading="lazy"
            />
            <img
              data-src="{{ s3Url }}play.png"
              alt="Play"
              class="img-fluid vide-play lazyload"
              loading="lazy"
            />
          </a>
          <h2 class="c-video-section--title">
            {{ item.title }}
          </h2>
        </div>
      </div>
    </div>

    <div class="c-video-slider--wrapper d-flex row">
      <div
        id="carouselExampleControls"
        class="carousel carousel-dark"
        data-bs-ride="carousel"
      >
        <div class="carousel-inner w-100" role="listbox">
          <ng-container
            *ngFor="let item of videoData | slice: 2:10; index as i"
          >
            <div class="carousel-item" [ngClass]="{ active: i === 0 }">
              <div class="col-md-3" style="width: 240px">
                <a
                  *ngIf="item?.media"
                  attr.data-src="{{ item.media.url }}"
                  data-bs-target="#videoModal"
                  data-bs-toggle="modal"
                  (click)="updateVideoUrl(item.media.url)"
                  href="#"
                  class="
                    video-btn
                    c-video-section--playBtn
                    d-flex
                    justify-content-center
                    align-items-center
                  "
                >
                  <img
                    data-srcset="{{ item.media | defaultImage: 238:133 }} 238w, 
                      {{ item.media | defaultImage: 225:133 }} 225w,
                    {{ item.media | defaultImage: 400:224 }} 400w, {{
                      item.media | defaultImage: 555:310
                    }} 555w"
                    data-sizes="{{
                      '(max-width: 576px) 555px,
                    (max-width: 992px) 400px,
                    (max-width: 1200px) 238px,
                    225px'
                    }}"
                    data-src="{{ item.media | defaultImage: 225:131 }}"
                    class="img-fluid lazyload video-img"
                    width="225"
                    height="131"
                    alt="video"
                    loading="lazy"
                  />
                  <img
                    data-src="{{ s3Url }}play.png"
                    alt="Play"
                    class="img-fluid vide-play lazyload"
                    loading="lazy"
                  />
                </a>
                <h3 class="c-video-section--title">
                  {{ item.title }}
                </h3>
              </div>
            </div>
          </ng-container>
        </div>

        <button
          class="carousel-control-prev"
          type="button"
          data-bs-target="#carouselExampleControls"
          data-bs-slide="prev"
        >
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button
          class="carousel-control-next"
          type="button"
          data-bs-target="#carouselExampleControls"
          data-bs-slide="next"
        >
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
    </div>
    <div
      class="modal fade"
      id="videoModal"
      tabindex="-1"
      aria-labelledby="exampleModalLabel"
      (click)="openVideoPlayer = true"
    >
      <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
          <div class="modal-body">
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
              aria-label="Close"
              (click)="openVideoPlayer = false"
            ></button>
            <iframe
              [src]="url | safeUrl"
              frameborder="0"
              width="100%"
              height="496px"
              allowfullscreen
            >
            </iframe>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
